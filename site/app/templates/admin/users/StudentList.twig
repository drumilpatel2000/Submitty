<div class="content">
    <div style="float: right; margin-bottom: 20px;">
        <a onclick="newDownloadForm()" class="btn btn-primary">Download Users</a>
        <a onclick="newClassListForm()" class="btn btn-primary">Upload Classlist</a>
        <a onclick="newUserForm()" class="btn btn-primary">New Student</a>
    </div>
    <h1>Manage Students</h1>
    <table class="table table-striped table-bordered persist-area">
        <thead class="persist-thead">
        <tr>
            <td width="3%"></td>
            <td width="14%">Registration Section</td>
            <td width="19%" style="text-align: left">User ID</td>
            <td width="29%" colspan="2">Name</td>
            <td width="14%">Rotating Section</td>
            <td width="12%">Manual Registration</td>
            <td width="6%">Muted</td>
            <td width="3%"></td>
        </tr>
        </thead>
        {% if sections|length > 0 %}
            {% for registration, students in sections %}
                <tr class="info persist-header">
                    <td colspan="9" style="text-align: center">Students Enrolled in Registration Section {{ registration }}</td>
                </tr>
                <tbody id="section-{{ registration }}">
                    {% for student in students %}
                        <tr id="user-{{ student.getId() }}"
                            {% if student.accessGrading() %}
                                style='background: #7bd0f7;'
                            {% endif %}
                        >
                            <td>{{ loop.index }}</td>
                            <td>{{ registration }}</td>
                            <td style="text-align: left">{{ student.getId() }}</td>
                            <td style="text-align: left">{{ student.getDisplayedFirstName() }}</td>
                            <td style="text-align: left">{{ student.getDisplayedLastName() }}</td>
                            <td>{{ student.getRotatingSection() ?? "NULL" }}</td>
                            <td>{{ student.isManualRegistration() ? "TRUE" : "FALSE" }}</td>
                            <td>{{ student.isMuted() ? "TRUE" : "FALSE" }}</td>
                            <td><a onclick="editUserForm('{{ student.getId() }}');" aria-label="edit user {{ student.getId() }}"><i class="fas fa-pencil-alt" aria-hidden="true"></i></a></td>
                        </tr>
                    {% endfor %}
                </tbody>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="8">No students found</td>
            </tr>
        {% endif %}
    </table>
</div>
{% include('admin/users/UserForm.twig') with {'action': 'update_student'} %}
{% include('admin/users/ClassListForm.twig') %}
